<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="jquery.js"></script>
<style>
	body {margin: 40px; font-family: Arial;}
	h1 {margin-bottom:30px;}
	button {padding:10px; font-family: Arial;}
	#result {padding-top:30px;}
</style>
<title>Mortgage Calculator</title>
</head>
<body>
	<h1>Mortgage Calculator</h1>
		<p>Loan Start Date:<input id="start_date" /></p>
		<p>Interest Rate:<input id="interest" />%</p>
		<p>Loan Amount: $<input id="principal" /></p>
		<p>Term (years) <input id="years" /></p>
		Number of Monthly Payments<input id="months" />
		
		<p><button id="calculate">Calculate</button></p>
	
	<p id="result">Your Monthly Mortgage Payment: $<input id="monthly_payment" /></p>
	
	
	<table id="amortization">
		
	</table>
	
	<script>
		var currentTime = new Date();
		var month = currentTime.getMonth() + 1;
		var day = currentTime.getDate();
		var year = currentTime.getFullYear();
		jQuery('#start_date').val(month + "/" + day + "/" + year);
	
		function convert_to_months() {
			var n = jQuery('#years').val()*12;
			jQuery('#months').val(n);
			
		}
		
		function convert_reverse() {
			var n = jQuery('#months').val()/12;
			jQuery('#years').val(n);
		}
		
		function calculate_rate() {
			var P = parseFloat(jQuery('#principal').val());		//Principal, initial amount of the loan
				
			var L = parseFloat(jQuery('#months').val());		//Length (years) of the loan
				
			var I = parseFloat(jQuery('#interest').val());		//Annual Interest Rate
		
			var J = I/(12*100);									//Monthly Interest in Decimal Form
			
			var L = jQuery('#years').val();						//Length of the Loan (Years)
			
			var N = parseInt(L*12);								//Number of Monthly Payments
			
			jQuery('#months').val(N);
			
			var M = parseFloat(P*(J / (1 - Math.pow((1+J), -N))));
			
			jQuery('#monthly_payment').val(M.toFixed(2));
			
			
			
			s = '';
			s = s + '<thead><tr>' + '<th>Payment No.</th>' + '<th style="padding:10px">Interest</th>' + '<th style="padding:10px">Principal</th>' + '<th style="padding:10px">Amount Owed</th>' +'</tr></thead>';
			jQuery('table#amortization').html(s);
			
			
			for(i=1; i<=N; i++) { 
				var H = parseFloat(P*J).toFixed(2);	//Monthly Interest
				var C = parseFloat(M-H).toFixed(2);	//Monthly Payment - Monthly Interest; Principal per Month
				var Q = parseFloat(P-C).toFixed(2);	//New Balance of Your Principal
				
			
				s = s + "<tr><td>"+ i +"</td><td>"+ H +"</td><td>"+ C +"</td><td>"+ Q +"</td></tr>"
				P = Q;
				
               jQuery('table#amortization').html(s);
            }
			
			
		}
		
		
		jQuery('#years').keyup(convert_to_months);
		jQuery('#months').keyup(convert_reverse);
		jQuery('#calculate').click(calculate_rate);

		
		
		

		
	</script>
	
	
</body>
</html>